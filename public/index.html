<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Fa$t | Store</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.tailwindcss.com https://accounts.google.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; img-src 'self' data: https://lh3.googleusercontent.com; connect-src 'self' https://accounts.google.com; frame-src https://accounts.google.com;">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* Desain asli Anda */
        body { 
            background: #050505; 
            color: white; 
            font-family: sans-serif; 
            /* Keamanan: Mencegah sorot teks (Anti-Copy) */
            user-select: none; 
            -webkit-user-select: none;
        }
        .nav-glass { background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .animate-fade { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body oncontextmenu="return false;">
    <nav class="nav-glass sticky top-0 z-50 px-6 py-4 flex justify-between items-center">
        <div class="text-2xl font-black italic cursor-pointer" onclick="loadPage('beranda')">
            NO <span class="text-blue-500">FA$T</span>
        </div>
        
        <div class="flex items-center gap-4">
            <button onclick="loadPage('katalog')" class="text-[10px] font-black uppercase tracking-widest border border-white/20 px-4 py-2 rounded-full hover:bg-white hover:text-black transition">
                Katalog
            </button>
            
            <div id="auth-box">
                <div id="g_id_onload"
                    /* API Client ID Baru Anda */
                    data-client_id="502358231350-pr4t7jj775ckcu64n8stfeq6qkesjr15.apps.googleusercontent.com"
                    data-callback="handleCredentialResponse"
                    data-auto_prompt="false">
                </div>
                <div class="g_id_signin" 
                    data-type="standard" 
                    data-shape="pill" 
                    data-theme="outline" 
                    data-text="signin_with" 
                    data-size="small" 
                    data-logo_alignment="left">
                </div>
            </div>
        </div>
    </nav>

    <main id="content" class="max-w-7xl mx-auto p-6 min-h-screen"></main>

    <script>
        // KEAMANAN: Memblokir F12, Ctrl+U, dan Inspect Element
        document.onkeydown = function(e) {
            if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || (e.ctrlKey && e.keyCode == 85)) {
                return false;
            }
        };

        // Fungsi Handle Login Google
        function handleCredentialResponse(response) {
            const payload = JSON.parse(atob(response.credential.split('.')[1]));
            localStorage.setItem('user_nofast', JSON.stringify(payload));
            renderUser(payload);
        }

        // Fungsi Menampilkan Profil User Setelah Login
        function renderUser(user) {
            document.getElementById('auth-box').innerHTML = `
                <div class="flex items-center gap-2 bg-white/5 p-1 pr-3 rounded-full border border-white/10">
                    <img src="${user.picture}" class="w-7 h-7 rounded-full shadow-lg" alt="profile">
                    <span class="text-[9px] font-black uppercase tracking-tighter">${user.given_name}</span>
                    <button onclick="logout()" class="ml-1 text-red-500 text-[10px] hover:text-red-400">
                        <i class="fas fa-power-off"></i>
                    </button>
                </div>`;
        }

        // Fungsi Logout
        function logout() {
            localStorage.removeItem('user_nofast');
            location.reload();
        }

        // Fungsi Load Halaman Dinamis
        async function loadPage(page) {
            try {
                const res = await fetch(`pages/${page}.html`);
                if (!res.ok) throw new Error('Halaman tidak ditemukan');
                
                const html = await res.text();
                const contentDiv = document.getElementById('content');
                contentDiv.innerHTML = `<div class="animate-fade">${html}</div>`;
                
                const scripts = contentDiv.querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement("script");
                    newScript.text = oldScript.innerText;
                    document.body.appendChild(newScript).parentNode.removeChild(newScript);
                });
            } catch (e) { 
                console.error(e);
                document.getElementById('content').innerHTML = `<div class="text-center mt-20 text-gray-500 font-bold uppercase tracking-widest">404 - Halaman "${page}" Belum Tersedia.</div>`;
            }
        }

        // Inisialisasi Saat Halaman Dimuat
        window.onload = () => {
            const savedUser = localStorage.getItem('user_nofast');
            if (savedUser) {
                renderUser(JSON.parse(savedUser));
            }
            loadPage('beranda');
        };
    </script>
</body>
</html>

